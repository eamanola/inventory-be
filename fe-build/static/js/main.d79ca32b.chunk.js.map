{"version":3,"sources":["services/category.js","app.js","index.js"],"names":["cache","getFromCache","category","cached","expires","Date","getTime","data","getFromServer","a","url","axios","get","response","fails","error","message","length","join","console","log","getCategory","App","useState","setCategory","list","setList","notification","setNotification","gloves","facemasks","beanies","page","setPage","loading","setLoading","useEffect","setTimeout","categoryService","availabilityColor","availability","color","green","yellow","red","Container","maxWidth","Paper","Alert","severity","onClose","AppBar","position","Tabs","value","onChange","e","newValue","Tab","label","List","slice","map","item","ListItem","ListItemText","primary","name","secondary","style","manufacturer","id","Grid","container","justify","padding","Pagination","count","Math","floor","Backdrop","open","zIndex","CircularProgress","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d79ca32b.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = process.env.NODE_ENV === 'production'\n  ? '' : 'http://localhost:3002';\n\nconst cache = {};\n\nconst getFromCache = (category) => {\n  const cached = cache[category];\n\n  if (cached && cached.expires > (new Date()).getTime()) {\n    return cached.data;\n  }\n\n  return null;\n};\n\nconst getFromServer = async (category) => {\n  const url = `${baseUrl}/category/${category}`;\n  try {\n    const response = await axios.get(url);\n    const { data, fails, error } = response.data;\n    let message = null;\n\n    if (error) {\n      return [[], error];\n    }\n\n    if (fails && fails.length) {\n      message = `${fails.join(', ')} systems could not be reached. Please try again later.`;\n    } else {\n      cache[category] = {\n        data,\n        expires: (new Date()).getTime() + 1000 * 60 * 5,\n      };\n    }\n\n    return [data, message];\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.log(e);\n    return [[], 'Somthing went wrong. Please try again later.'];\n  }\n};\n\nconst getCategory = async (category) => {\n  let data;\n\n  data = getFromCache(category);\n  if (data === null) {\n    data = await getFromServer(category);\n  }\n\n  return data;\n};\n\nexport default { getCategory };\n","import React, { useEffect, useState } from 'react';\n\nimport {\n  Container, Paper,\n  AppBar, Tabs, Tab,\n  List, ListItem, ListItemText,\n  Backdrop, CircularProgress,\n  Grid,\n} from '@material-ui/core';\n\nimport {\n  green,\n  yellow,\n  red,\n} from '@material-ui/core/colors';\n\nimport { Pagination, Alert } from '@material-ui/lab';\n\nimport categoryService from './services/category';\n\nconst App = () => {\n  const [category, setCategory] = useState('gloves');\n  const [list, setList] = useState([]);\n  const [notification, setNotification] = useState(null);\n  const [page, setPage] = useState({\n    gloves: 0,\n    facemasks: 0,\n    beanies: 0,\n  });\n  const [loading, setLoading] = useState(false);\n\n  const ITEMS_PER_PAGE = 10;\n\n  const handleCategoryChange = (e, newValue) => {\n    setCategory(newValue);\n  };\n\n  const handlePageChange = (e, newValue) => {\n    setPage({ ...page, [category]: newValue - 1 });\n  };\n\n  useEffect(async () => {\n    setTimeout(() => { setLoading(true); });\n\n    const [data, message] = await categoryService.getCategory(category);\n    setList(data);\n    setNotification(message);\n    setTimeout(() => { setLoading(false); }, 1);\n  }, [category]);\n\n  const availabilityColor = (availability) => {\n    let color;\n\n    switch (availability) {\n      case 'INSTOCK':\n        // eslint-disable-next-line prefer-destructuring\n        color = green[400];\n        break;\n      case 'LESSTHAN10':\n        // eslint-disable-next-line prefer-destructuring\n        color = yellow[400];\n        break;\n      case 'OUTOFSTOCK':\n        // eslint-disable-next-line prefer-destructuring\n        color = red[400];\n        break;\n      default:\n        color = 'inherit';\n    }\n\n    return color;\n  };\n\n  return (\n    <>\n      <Container maxWidth=\"sm\">\n        <Paper>\n          {notification && (\n            <Alert severity=\"warning\" onClose={() => setNotification(null)}>\n              {notification}\n            </Alert>\n          )}\n          <AppBar position=\"static\">\n            <Tabs value={category} onChange={handleCategoryChange}>\n              <Tab value=\"gloves\" label=\"Gloves\" />\n              <Tab value=\"facemasks\" label=\"Facemasks\" />\n              <Tab value=\"beanies\" label=\"Beanies\" />\n            </Tabs>\n          </AppBar>\n          <List>\n            {list.slice(\n              page[category] * ITEMS_PER_PAGE,\n              (page[category] + 1) * ITEMS_PER_PAGE,\n            ).map((item) => (\n              <ListItem key={item.id}>\n                <ListItemText\n                  primary={item.name}\n                  secondary={(\n                    <>\n                      <span\n                        style={{ color: availabilityColor(item.availability) }}\n                      >\n                        {item.availability}\n                      </span>\n                      &nbsp;\n                      from\n                      &nbsp;\n                      {item.manufacturer}\n                    </>\n                  )}\n                />\n              </ListItem>\n            ))}\n          </List>\n          <Grid container justify=\"center\" style={{ padding: '0.5em 0' }}>\n            <Pagination\n              count={\n                Math.floor(list.length / ITEMS_PER_PAGE)\n                + (list.length % ITEMS_PER_PAGE > 0 ? 1 : 0)\n              }\n              color=\"primary\"\n              page={page[category] + 1}\n              onChange={handlePageChange}\n            />\n          </Grid>\n        </Paper>\n        <Backdrop open={loading} style={{ zIndex: 1 }}>\n          <CircularProgress />\n        </Backdrop>\n      </Container>\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\n\nconst render = () => {\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n  );\n};\n\nrender();\n"],"sourceRoot":""}